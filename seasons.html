<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seasons</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #ffffff;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .season-item {
            padding: 10px;
            border: 1px solid #333;
            margin: 10px;
            text-align: center;
            background-color: #1e1e1e;
            border-radius: 5px;
        }
        .season-title {
            font-size: 18px;
            font-weight: bold;
            margin-top: 10px;
        }
        .episode-list {
            list-style-type: none;
            padding: 0;
        }
        .episode-item {
            padding: 10px;
            border: 1px solid #333;
            margin: 10px;
            background-color: #1e1e1e;
            border-radius: 5px;
        }
        .episode-title {
            font-size: 16px;
            font-weight: bold;
        }
        .play-button {
            background-color: #ff9900;
            color: white;
            border: none;
            padding: 10px 0;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <h1>Seasons</h1>
    <div id="seasons-container"></div>

    <script>
        const apiKey = '5590873'; // Replace with your OMDb API key

        // Function to get seasons and episodes
        function getSeasons(imdbId) {
            const url = `https://www.omdbapi.com/?i=${imdbId}&apikey=${apiKey}&plot=full`;

            $.get(url, function(data) {
                if (data.Response === "True") {
                    displaySeasons(data);
                } else {
                    $('#seasons-container').html('<p>No seasons found</p>');
                }
            });
        }

        // Function to display seasons and episodes
        function displaySeasons(data) {
            const seasonsContainer = $('#seasons-container');
            seasonsContainer.html(''); // Clear previous results

            for (let season = 1; season <= data.totalSeasons; season++) {
                const seasonHtml = `
                    <div class="season-item">
                        <div class="season-title">Season ${season}</div>
                        <ul class="episode-list" id="season-${season}-episodes"></ul>
                    </div>
                `;
                seasonsContainer.append(seasonHtml);
                getEpisodes(data.imdbID, season);
            }
        }

        // Function to get episodes for a season
        function getEpisodes(imdbId, season) {
            const url = `https://www.omdbapi.com/?i=${imdbId}&Season=${season}&apikey=${apiKey}`;

            $.get(url, function(data) {
                if (data.Response === "True") {
                    displayEpisodes(data.Episodes, season);
                }
            });
        }

        // Function to display episodes
        function displayEpisodes(episodes, season) {
            const episodeList = $(`#season-${season}-episodes`);
            episodeList.html(''); // Clear previous results

            episodes.forEach(episode => {
                const episodeHtml = `
                    <li class="episode-item">
                        <div class="episode-title">${episode.Title} (Episode ${episode.Episode})</div>
                        <button class="play-button" onclick="playEpisode('${episode.imdbID}')">Play</button>
                    </li>
                `;
                episodeList.append(episodeHtml);
            });
        }

        // Function to handle Play button click
        function playEpisode(imdbId) {
            const playUrl = `https://vidsrc.to/embed/tv/${imdbId}`;
            window.location.href = `noads.html?url=${encodeURIComponent(playUrl)}`;
        }

        // Get the IMDb ID from the query string
        const urlParams = new URLSearchParams(window.location.search);
        const imdbId = urlParams.get('id');
        if (imdbId) {
            getSeasons(imdbId);
        }
    </script>

</body>
</html>
